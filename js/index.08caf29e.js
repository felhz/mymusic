(function(t){function e(e){for(var i,o,s=e[0],c=e[1],l=e[2],d=0,f=[];d<s.length;d++)o=s[d],r[o]&&f.push(r[o][0]),r[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(f.length)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(i=!1)}i&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},r={index:0},a=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/mymusic/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("5779")},"174a":function(t,e,n){"use strict";var i=n("dee2"),r=n.n(i);r.a},1845:function(t,e,n){},"4fab":function(t,e,n){"use strict";var i=n("de3f"),r=n.n(i);r.a},5779:function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("el-container",{staticStyle:{height:"100%"}},[n("el-aside",{staticClass:"hidden-xs-only",staticStyle:{padding:"0"},attrs:{width:"400px"}},[n("Aside",{staticStyle:{height:"100%"},attrs:{"song-list":t.SongList}})],1),n("el-container",[n("el-header",[n("Header",{attrs:{"ch-category":t.categoryId},on:{"update:chCategory":function(e){t.categoryId=e},"update:ch-category":function(e){t.categoryId=e}}})],1),n("el-main",{staticStyle:{padding:"0"}},[n("transition",{attrs:{name:"fade"}},[n("router-view",{attrs:{"song-list":t.SongList,"category-id":t.categoryId},on:{"update:songList":function(e){t.SongList=e},"update:song-list":function(e){t.SongList=e}}})],1)],1),n("transition",{attrs:{name:"fade"}},[t.playerInfo?n("div",[n("el-footer",[n("AudioPlayer",{attrs:{"player-info":t.playerInfo},on:{chindex:t.audioChIndex}})],1)],1):t._e()])],1)],1)],1)},a=[],o=n("cebc"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100%"}},[n("router-view",{attrs:{name:"a"}}),t.songList?n("div",{staticStyle:{"background-color":"#99a9bf",height:"50px","line-height":"50px"}},[n("span",{staticClass:"music-title"},[t._v(t._s(t.songList.title))]),n("br")]):t._e(),n("div",{staticStyle:{height:"calc(100% - 50px)"}},[n("SongList",{attrs:{"song-list":t.songList}})],1)],1)},c=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"asideSongScroller",staticStyle:{height:"100%",position:"relative",overflow:"hidden"}},[n("div",{staticClass:"content"},[t.songList?n("div",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},t._l(t.songList.songs,function(e,i){return n("div",{key:i,class:[t.playerIndex===i?"player-item":"","list-item"],staticStyle:{position:"relative"},on:{click:function(e){return t.handleSongItem(i)}}},[n("el-image",{staticStyle:{width:"45px",height:"45px"},attrs:{src:e.pic,fit:"cover"}}),n("span",{staticStyle:{"padding-left":"30px"}},[t._v(t._s(e.singer))]),t._v(":\n                "),n("span",[t._v(t._s(e.name))]),t.playerIndex===i?n("i",{staticClass:"el-icon-video-play ",staticStyle:{float:"right",margin:"19px 100px 0 0"}}):t._e()],1)}),0):n("div",{staticClass:"list-empty-icon"},[n("i",{staticClass:"el-icon-s-shop"}),n("br"),t._v("\n            播放列表为空,选择歌单\n        ")])])])},u=[],d=n("2f62"),f=n("1fba"),p={name:"AudioList",props:["songList"],data:function(){return{}},mounted:function(){new f["a"](this.$refs.asideSongScroller,{scrollbar:{fade:!0,interactive:!1},click:!0,mouseWheel:!0})},methods:{handleSongItem:function(t){this.$store.commit("updatePlayerIndex",t)}},watch:{songList:function(){this.$store.commit("updateplayerList",this.songList)}},computed:Object(d["b"])({playerIndex:function(t){return t.playerIndex}})},h=p,g=(n("cd26"),n("2877")),y=Object(g["a"])(h,l,u,!1,null,"a52b22d4",null),m=y.exports,v={props:["songList"],data:function(){return{}},components:{SongList:m},watch:{songList:function(){console.log(this.songList)}}},x=v,S=(n("4fab"),Object(g["a"])(x,s,c,!1,null,null,null)),b=S.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"white-space":"nowrap",overflow:"auto","-webkit-overflow-scrolling":"touch"}},[n("el-menu",{staticClass:"el-menu-demo",staticStyle:{width:"550px"},attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelect}},t._l(t.sortArr,function(e,i){return n("el-submenu",{key:i,attrs:{index:i+""}},[n("template",{slot:"title"},[t._v(t._s(e.categoryGroupName))]),t._l(e.items,function(e,r){return n("el-menu-item",{key:r,attrs:{index:i+"-"+r},on:{click:function(n){return t.selectCategory(e.categoryId)}}},[t._v("\n                "+t._s(e.categoryName)+"\n            ")])})],2)}),1)],1)},_=[],L={name:"Header",data:function(){return{activeIndex:"0-0",sortArr:[]}},mounted:function(){var t=this;this.musicApi.songListCategory().then(function(e){t.sortArr=e.data.data,t.$emit("update:ch-category",t.sortArr[0].items[0].categoryId)})},methods:{handleSelect:function(){},selectCategory:function(t){this.$emit("update:ch-category",t)}}},I=L,k=Object(g["a"])(I,w,_,!1,null,"1c942f87",null),C=k.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition",{attrs:{name:"el-fade-in-linear"}},[t.playerInfo?n("div",[n("div",{staticStyle:{overflow:"hidden"}},[n("div",{staticStyle:{float:"left",width:"50px","line-height":"50px"}},[n("el-image",{staticStyle:{width:"40px",height:"40px","vertical-align":"middle"},attrs:{src:t.playerInfo.pic,fit:"cover"}})],1),n("div",{staticStyle:{float:"left","text-align":"left",width:"calc(100% - 50px)"}},[n("div",{staticClass:" text-overflow"},[n("span",{staticStyle:{"padding-left":"15px"}},[t._v(t._s(t.playerInfo.name))]),t._v(" \n                        "),n("span",[t._v(t._s(t.playTime))]),n("i",{staticClass:"el-icon-caret-left btn",on:{click:t.previousTrack}},[t._v("上一首")]),n("span",{staticClass:"btn",on:{click:function(e){t.play=!t.play}}},[t.play?n("i",{staticClass:"el-icon-video-pause btn"}):n("i",{staticClass:"el-icon-video-play btn"}),n("span",[t._v(t._s(t.play?t.pauseText:t.playText))])]),n("i",{staticClass:"el-icon-caret-right btn",on:{click:t.nextTrack}},[t._v("下一首")])]),n("div",{staticClass:"text-overflow"},[n("span",{staticStyle:{"padding-left":"15px"}},[t._v(t._s(t.lrcRows))])])])]),n("audio",{ref:"audio",staticStyle:{display:"none"},attrs:{src:t.playerInfo.url,autoplay:"",controls:""},on:{ended:t.ended,timeupdate:function(e){return t.timeupdate(e)}}}),n("transition",{attrs:{name:"el-fade-in-linear"}},[n("div",{staticStyle:{height:"10px"}},[t.currentProgress?n("div",{attrs:{width:"calc(100% - 100px)"}},[n("el-progress",{attrs:{percentage:t.currentProgress,"show-text":t.showProgressText}})],1):t._e()])])],1):t._e()])],1)},T=[],O=(n("c5f6"),n("ac6a"),n("456d"),n("3b2b"),{getLrc:function(t){var e={},n=new RegExp("(\\[)([0-9]{1,2}:[0-9]{1,2})(\\.[0-9]{1,3}\\])(.*)(\\n.*|.*)","g");function i(){var r=n.exec(t);r&&(e[r[2]]=r[4],i())}return i(),e}}),j=O,M={name:"AudioPlayer",props:["playerInfo"],data:function(){return{currentTime:null,duration:null,showProgressText:!1,play:!0,playText:"播放",pauseText:"暂停",lrc:null,lrcRows:null}},mounted:function(){var t=this;this.playerIndex=this.index;var e=this;window.onkeydown=function(t){return 32===t.keyCode&&(e.play=!e.play),37===t.keyCode&&e.$emit("chindex",!1),39===t.keyCode&&e.$emit("chindex",!0),!1},this.playerInfo&&this.musicApi.lic(this.playerInfo.lrc).then(function(n){var i=j.getLrc(n.data,A(t.currentTime));Object.keys(i).length>0?e.lrc=i:e.lrc=null})},methods:{ended:function(){this.$emit("chindex",!0)},timeupdate:function(t){if(this.lrc){var e=this.lrc[A(t.target.currentTime)];e&&(this.lrcRows=e)}this.currentTime=t.target.currentTime,this.duration=t.target.duration},nextTrack:function(){this.$emit("chindex",!0)},previousTrack:function(){this.$emit("chindex",!1)}},watch:{play:function(){var t=this.$refs.audio;this.play?t.play():t.pause()},playerInfo:function(){var t=this,e=this;this.lrcRows=null,this.musicApi.lic(this.playerInfo.lrc).then(function(n){var i=j.getLrc(n.data,A(t.currentTime));Object.keys(i).length>0?e.lrc=i:e.lrc=null})}},computed:{playTime:function(){return A(this.currentTime)},currentProgress:function(){return+(this.currentTime/this.duration*100).toFixed(2)},totalTime:function(){return A(this.duration)}}};function A(t){var e=0,n=0;function i(t){var e=Number(t).toFixed(0);return t<10&&(e="0"+Number(t).toFixed(0)),e}t>60?(e=Math.floor(t/60),n=Math.floor(t%60),e>=60&&(Math.floor(e/60),e=Math.floor(e%60))):(0,e=0,60==t?(e=1,n=0):n=t);var r=i(e)+":"+i(n);return r}var P=M,E=(n("174a"),Object(g["a"])(P,$,T,!1,null,"65491149",null)),N=E.exports,R={name:"app",data:function(){return{SongList:null,categoryId:null}},methods:{audioChIndex:function(t){var e=this.$store.state.playerIndex;this.$store.commit("updatePlayerIndex",t?++e:--e)}},components:{Aside:b,Header:C,AudioPlayer:N},watch:{SongList:function(){this.$store.commit("updatePlayerIndex",0)},categoryId:function(){}},computed:Object(o["a"])({},Object(d["b"])({playerInfo:function(t){return t.playerList?t.playerList.songs[t.playerIndex]:null}}))},H=R,F=(n("6c92"),Object(g["a"])(H,r,a,!1,null,null,null)),q=F.exports,J=n("8c4f"),W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello",staticStyle:{height:"100%"}},[n("Carousel",{attrs:{carousel:t.carousel,songlist:t.selectSongList,height:"300px"},on:{"update:songlist":function(e){t.selectSongList=e}}}),n("div",{ref:"songmenuScroller",staticStyle:{"background-color":"#fff",height:"calc( 100% - 300px)",position:"relative",overflow:"hidden"}},[n("div",t._l(t.songList,function(e){return n("div",{key:e.name,staticClass:"song-menu-item",on:{click:function(n){return t.clickSongItem(e.id)},contextmenu:function(n){return t.contextmenu(n,e)}}},[n("el-image",{staticStyle:{width:"45px",height:"45px"},attrs:{src:e.pic,fit:"cover"}}),n("span",{staticStyle:{padding:"0 5px"}},[t._v(t._s(e.name))])],1)}),0)]),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.contextMenuShow,expression:"contextMenuShow"}],ref:"contextmenu",staticStyle:{"line-height":"18px","background-color":"#fff",padding:"2px"},style:t.contextMenuStyle})])],1)},z=[],D=(n("7f7f"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.carousel?n("div",[n("el-carousel",{attrs:{interval:4e3,type:"card",height:t.height,"indicator-position":"none"}},t._l(t.carousel,function(e,i){return n("el-carousel-item",{key:i,nativeOn:{click:function(n){return t.clickCarousel(e.id)}}},[n("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.pic,fit:"cover"}},[n("span",[t._v("名字")]),t._v(": "),n("span",[t._v(t._s(e.name))])])],1)}),1)],1):t._e()}),G=[],U={props:["carousel","height"],data:function(){return{}},methods:{clickCarousel:function(t){var e=this;this.musicApi.songlist(t).then(function(t){e.$emit("update:songlist",t)})}}},X=U,Y=(n("94fe"),Object(g["a"])(X,D,G,!1,null,null,null)),B=Y.exports,K={props:["categoryId"],data:function(){return{sortArr:[],activeIndex:"0",songList:null,selectSongList:null,contextMenuStyle:{position:"fixed",top:"",left:""},contextMenuShow:!1}},mounted:function(){var t=this;new f["a"](this.$refs.songmenuScroller,{scrollbar:{fade:!0,interactive:!1},click:!0,mouseWheel:!0});document.querySelector("body").addEventListener("click",function(){t.contextMenuShow=!1},!1)},methods:{clickSongItem:function(t){var e=this;this.musicApi.songlist(t).then(function(t){e.$emit("update:song-list",t.data.data)})},handleSelect:function(t){var e=this;this.musicApi.hotSongList({sortId:Number(t)+1}).then(function(t){e.songList=t.data.data})},contextmenu:function(t,e){var n=t.clientX,i=t.clientY;this.$refs.contextmenu.innerHTML="",this.$refs.contextmenu.innerHTML+="<span></span><span> ".concat(e.name," </span><br/>"),this.contextMenuShow=!0,this.contextMenuStyle.top=i+"px",this.contextMenuStyle.left=n+"px",t.preventDefault()}},watch:{selectSongList:function(t){this.$emit("update:song-list",t.data.data)},categoryId:function(){var t=this;t.categoryId&&this.musicApi.hotSongList({categoryId:t.categoryId}).then(function(e){t.songList=e.data.data})}},computed:{carousel:function(){return this.songList?this.songList.slice(0,4):null}},components:{Carousel:B}},Q=K,V=(n("921f"),Object(g["a"])(Q,W,z,!1,null,"0954446e",null)),Z=V.exports;i["default"].config.productionTip=!1,i["default"].use(J["a"]);var tt=[{path:"/SongMenu",components:{default:Z}},{path:"/",redirect:"/SongMenu"}],et=new J["a"]({routes:tt}),nt=et,it=n("5c96"),rt=n.n(it),at=n("bc3a"),ot=n.n(at),st=ot.a.create({baseURL:"https://api.itooi.cn/music/tencent/"});st.interceptors.request.use(function(t){var e="579621905";return t.params?t.params.key=e:t.url.indexOf("key")<0&&(t.url+="?key=".concat(e)),t},function(t){return Promise.reject(t)});var ct={hotSongList:function(t){return t=Object.assign({categoryId:null,sortId:3,limit:20},t),st.get("hotSongList",{params:t})},search:function(t){return t=Object.assign({s:"li",type:"song",limit:"20",offset:"1"},t),st.get("search",{params:t})},songlist:function(t){if(t)return st.get("songList",{params:{id:t}})},song:function(t){if(t)return st.get("song",{params:t})},songListCategory:function(){return st.get("songListCategory")},lic:function(t){return st.get(t)}},lt=ct;n("0fae"),n("e05f");i["default"].use(d["a"]);var ut=new d["a"].Store({state:{playerIndex:0,playerList:null},mutations:{updatePlayerIndex:function(t,e){t.playerIndex=e},updateplayerList:function(t,e){t.playerList=e}}}),dt=ut;i["default"].prototype.musicApi=lt,i["default"].config.productionTip=!1,i["default"].use(rt.a),new i["default"]({router:nt,musicApi:lt,store:dt,render:function(t){return t(q)}}).$mount("#app")},"5bba":function(t,e,n){},"6c92":function(t,e,n){"use strict";var i=n("d34a"),r=n.n(i);r.a},"921f":function(t,e,n){"use strict";var i=n("5bba"),r=n.n(i);r.a},"94fe":function(t,e,n){"use strict";var i=n("1845"),r=n.n(i);r.a},c6be:function(t,e,n){},cd26:function(t,e,n){"use strict";var i=n("c6be"),r=n.n(i);r.a},d34a:function(t,e,n){},de3f:function(t,e,n){},dee2:function(t,e,n){}});
//# sourceMappingURL=index.08caf29e.js.map